(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),c=a.n(r),o=(a(18),a(1)),i=a(3),l=a(5),u=a(2),m=a.n(u),h=a(6),d=a(7),f=a(8),g=a(10),b=a(9),p=a(4),v=a.n(p),k=function(e){var t=e%60,a=(e-t)/60;return a<1?"".concat(t,"\u043c"):"".concat(a,"\u0447 ").concat(t,"\u043c")},E=function(e,t){var a=new Date(Date.parse(e)),n=new Date(a);return n.setMinutes(a.getMinutes()+t),"".concat(a.getUTCHours(),":").concat(a.getMinutes()," - ").concat(n.getUTCHours(),":").concat(n.getMinutes())},N=function(e){return e.join(", ")},x=function(e){return 1===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":e>1&&e<5?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},w=function(){var e=Object(h.a)(m.a.mark((function e(t,a){var n,s,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,fetch(t);case 4:return s=e.sent,e.next=7,s.json();case 7:if(r=e.sent,n=r.tickets,!r.stop){e.next=11;break}return e.abrupt("return",[].concat(Object(o.a)(a),Object(o.a)(n)));case 11:e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.next=18,w(t,a);case 18:return e.abrupt("return",e.sent);case 19:return e.next=21,w(t,[].concat(Object(o.a)(a),Object(o.a)(n)));case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(e,t){return e.filter((function(e){return function(e,t){var a=t.oneTransfer,n=t.twoTransfers,s=t.threeTransfers,r=t.without;return!(!r||0!==e.segments[0].stops.length)||(!(!a||1!==e.segments[0].stops.length)||(!(!n||2!==e.segments[0].stops.length)||(!(!s||3!==e.segments[0].stops.length)||!(a||n||s||r))))}(e,t)})).slice(0,5)},T=(a(20),a(21),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.ticket;return s.a.createElement("div",{className:"ticket"},s.a.createElement("div",{className:"ticketHeader"},s.a.createElement("div",{className:"price"},e.price.toLocaleString("ru-RU")," \u0420"),s.a.createElement("img",{className:"companyLogo",src:"//pics.avs.io/99/36/".concat(e.carrier,".png"),alt:"logo"})),s.a.createElement("div",{className:"routeInfo"},s.a.createElement("div",{className:"route"},s.a.createElement("h3",null,e.segments[0].origin," - ",e.segments[0].destination),s.a.createElement("div",{className:"routeDetails"},E(e.segments[0].date,e.segments[0].duration))),s.a.createElement("div",{className:"length"},s.a.createElement("h3",null,"\u0412 \u043f\u0443\u0442\u0438"),s.a.createElement("div",{className:"routeDetails"},k(e.segments[0].duration))),s.a.createElement("div",{className:"stops"},s.a.createElement("h3",null,e.segments[0].stops.length," ",x(e.segments[0].stops.length)),s.a.createElement("div",{className:"routeDetails"},N(e.segments[0].stops)))),s.a.createElement("div",{className:"routeInfo"},s.a.createElement("div",{className:"route"},s.a.createElement("h3",null,e.segments[1].origin," - ",e.segments[1].destination),s.a.createElement("div",{className:"routeDetails"},E(e.segments[1].date,e.segments[1].duration))),s.a.createElement("div",{className:"length"},s.a.createElement("h3",null,"\u0412 \u043f\u0443\u0442\u0438"),s.a.createElement("div",{className:"routeDetails"},k(e.segments[1].duration))),s.a.createElement("div",{className:"stops"},s.a.createElement("h3",null,e.segments[1].stops.length," ",x(e.segments[1].stops.length)),s.a.createElement("div",{className:"routeDetails"},N(e.segments[1].stops)))))}}]),a}(n.Component)),O=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getRequest=Object(h.a)(m.a.mark((function e(){var t,a,s,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.next=3,fetch("https://front-test.beta.aviasales.ru/search");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,s="https://front-test.beta.aviasales.ru/tickets?searchId=".concat(a.searchId),e.next=10,w(s,[]);case 10:r=e.sent,console.log(r),n.setState({tickets:r,ticketsForRender:r.slice(0,5),isLoading:!1});case 13:case"end":return e.stop()}}),e)}))),n.toggleMenu=function(){var e=n.state.isMenuHiden;n.setState({isMenuHiden:!e})},n.handleCheckbox=function(e){var t,a=e.target,s=n.state,r=s.filters,c=s.tickets;t="all"===a.id?r.all?{all:!1,without:!1,oneTransfer:!1,twoTransfers:!1,threeTransfers:!1}:{all:!0,without:!0,oneTransfer:!0,twoTransfers:!0,threeTransfers:!0}:Object(l.a)({all:!1},a.id,!r[a.id]);var o=j(c,Object(i.a)(Object(i.a)({},r),t));n.setState({filters:Object(i.a)(Object(i.a)({},r),t),ticketsForRender:o,buttonsState:null})},n.handleSort=function(e){var t=e.target,a=n.state,s=a.tickets,r=a.filters;if(a.buttonsState!==t.id){var c=Object(o.a)(s),i="cheapest"===t.id?c.sort((function(e,t){return e.price-t.price})):c.sort((function(e,t){return e.segments[0].duration-t.segments[0].duration})),l=j(i,r),u="cheapest"===t.id?"cheapest":"fastest";n.setState({ticketsForRender:l,buttonsState:u})}else n.setState({buttonsState:null,ticketsForRender:s.slice(0,5)})},n.state={tickets:null,ticketsForRender:null,isLoading:!0,isMenuHiden:!0,buttonsState:null,filters:{oneTransfer:!1,twoTransfers:!1,threeTransfers:!1,all:!1,without:!1}},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getRequest()}},{key:"render",value:function(){var e=this.state,t=e.ticketsForRender,a=e.isLoading,n=e.isMenuHiden,r=e.filters,c=e.buttonsState,o=v()({filter:!0,mobileFilter:!n}),i=v()({mobileMenu:!0,mobileMenuOpened:!n}),l=v()({leftButton:!0,active:"cheapest"===c}),u=v()({rightButton:!0,active:"fastest"===c});return s.a.createElement("div",{id:"container"},s.a.createElement("button",{className:i,onClick:this.toggleMenu}),s.a.createElement("div",{className:o},s.a.createElement("div",{className:"title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),s.a.createElement("form",{className:"checkboxes"},s.a.createElement("div",{className:"checkboxField"},s.a.createElement("input",{id:"all",type:"checkbox",checked:r.all,onChange:this.handleCheckbox}),s.a.createElement("label",{htmlFor:"all"},"\u0412\u0441\u0435")),s.a.createElement("div",{className:"checkboxField"},s.a.createElement("input",{id:"without",type:"checkbox",checked:r.without,onChange:this.handleCheckbox}),s.a.createElement("label",{htmlFor:"without"},"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),s.a.createElement("div",{className:"checkboxField"},s.a.createElement("input",{id:"oneTransfer",type:"checkbox",checked:r.oneTransfer,onChange:this.handleCheckbox}),s.a.createElement("label",{htmlFor:"oneTransfer"},"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),s.a.createElement("div",{className:"checkboxField"},s.a.createElement("input",{id:"twoTransfers",type:"checkbox",checked:r.twoTransfers,onChange:this.handleCheckbox}),s.a.createElement("label",{htmlFor:"twoTransfers"},"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),s.a.createElement("div",{className:"checkboxField"},s.a.createElement("input",{id:"threeTransfers",type:"checkbox",checked:r.threeTransfers,onChange:this.handleCheckbox}),s.a.createElement("label",{htmlFor:"threeTransfers"},"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")))),s.a.createElement("div",{className:"ticketsBlock"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{id:"cheapest",className:l,onClick:this.handleSort},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),s.a.createElement("button",{id:"fastest",className:u,onClick:this.handleSort},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),s.a.createElement("div",{className:"tickets"},a?s.a.createElement("div",{className:"donut"}):t.map((function(e){return s.a.createElement(T,{key:Math.random().toString(36).substr(2,9),ticket:e})})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.bc0e0e47.chunk.js.map